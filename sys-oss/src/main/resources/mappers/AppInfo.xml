<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sys.dao.AppInfoDao">
    <!--应用信息表-->
    <sql id="table">app_info</sql>

    <sql id="base_columns">
        ${alias}`app_id`,
        ${alias}`name`,
        ${alias}`icon`,
        ${alias}`free`,
        ${alias}`price`,
        ${alias}`itunes_url`,
        ${alias}`bundle_id`,
        ${alias}`file_size`,
        ${alias}`size_name`,
        ${alias}`update_time`
    </sql>

    <sql id="find_columns">
        <include refid="base_columns"/>
    </sql>

    <resultMap id="resultMap" type="com.ayl.advert.model.AppInfo">
        <id property="app_id" column="app_id"/>
    </resultMap>

    <select id="get" resultMap="resultMap">
        select
        <include refid="find_columns">
            <property name="alias" value="t."/>
        </include>
        from
        <include refid="table"/>
        t
        where
        app_id=#{app_id}
    </select>

    <sql id="insert_columns">(
        <include refid="base_columns">
            <property name="alias" value=""/>
        </include>
        )
    </sql>

    <sql id="insert_values">(
        #{app_id},
        #{name},
        #{icon},
        #{free},
        #{price},
        #{itunes_url},
        #{bundle_id},
        #{file_size},
        #{size_name},
        #{update_time}
        )
    </sql>

    <sql id="update_columns">
        app_id=#{app_id},
        name=#{name},
        icon=#{icon},
        free=#{free},
        price=#{price},
        itunes_url=#{itunes_url},
        bundle_id=#{bundle_id},
        file_size=#{file_size},
        size_name=#{size_name},
        update_time=#{update_time}
    </sql>


    <insert id="save" >
        insert into
        <include refid="table"/>
        <include refid="insert_columns"/>
        values
        <include refid="insert_values"/>
    </insert>

    <update id="update">
        update
        <include refid="table"/>
        <set>
            <include refid="update_columns"/>
        </set>
        where
        app_id=#{app_id}
    </update>

</mapper>